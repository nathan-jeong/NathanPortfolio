<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arduino Binary Counter Simulator</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Dark background */
            
        }
        
        /* Custom styles for the 7-segment display (inspired by cathode displays) */
        .segment {
            background-color: #2c0a0a; /* Off color */
            transition: background-color 0.05s;
            border-radius: 2px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }
        .segment.on {
            background-color: #f00; /* Bright red 'On' color */
            box-shadow: 0 0 8px #f00, 0 0 15px rgba(255, 0, 0, 0.4);
        }
        /* Common segment shapes */
        .h { height: 10px; width: 40px; } /* Horizontal */
        .v { height: 40px; width: 10px; } /* Vertical */

        /* LED styles */
        .led {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #1a1a1a;
            border: 2px solid #333;
            transition: background-color 0.1s, box-shadow 0.1s;
        }
        .led.on {
            background-color: #22c55e; /* Green color */
            box-shadow: 0 0 10px #22c55e, inset 0 0 5px #dcfce7;
            border-color: #16a34a;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="flex justify-end mb-4">
            <a href="index.html" class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-700 hover:bg-gray-600 transition-colors duration-200">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Portfolio
            </a>
    </div>    
    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Column 1: Arduino Code Display -->
        <div class="lg:col-span-2 bg-[#161b22] text-white rounded-xl shadow-2xl p-6 h-fit">
            <h1 class="text-3xl font-bold mb-4 text-green-400 border-b border-gray-700 pb-2">
                Binary Counter Arduino Sketch
            </h1>
            <p class="text-sm text-gray-400 mb-4">
                Arduino works by using a microcontroller on a physical board to read inputs from sensors and control outputs like LEDs or motors based on code you write in the Arduino IDE. You write a program (called a "sketch") on your computer, and then upload it to the Arduino board, which runs the code to create an interactive project. 
                This Arduino code reads analog input, maps it to 0-63, sets 6 digital pins (LEDs), and prints the value to a display. 
            </p>
            <div class="w-full h-80 bg-black/80 rounded-lg p-4 overflow-y-scroll text-sm font-mono leading-relaxed shadow-inner mb-8 border border-gray-700 text-green-300">
                <pre id="arduino-code" class="whitespace-pre-wrap"></pre>
            </div>
            <div id="project-image-container" class="w-full min-h-[100px] bg-gray-800 rounded-lg p-4 flex items-center justify-center text-gray-500 text-sm overflow-hidden">
                
                HERE!
                
                <svg width="200" height="200" xmlns="https://www.w3.org/2000/svg">
                    <embed src= "arduino1.svg" />
                </svg>
            </div>
        </div>

        <!-- Column 2: Interactive Simulation -->
        <div class="lg:col-span-1 bg-gray-900 rounded-xl shadow-2xl p-6 flex flex-col items-center justify-center">
            <h2 class="text-2xl font-bold mb-6 text-yellow-400">
                Arduino Simulation
            </h2>

            <!-- The Binary Display (6 LEDs) -->
            <div class="mb-8 p-4 bg-gray-800 rounded-lg shadow-inner">
                <p class="text-gray-400 text-xs mb-2 text-center">Binary Output (MSB to LSB: 32, 16, 8, 4, 2, 1)</p>
                <div id="led-container" class="flex space-x-3">
                    <!-- LEDs are added dynamically by JS for clarity, or can be hardcoded like below -->
                    <div id="led-5" class="led" title="Value 32"></div>
                    <div id="led-4" class="led" title="Value 16"></div>
                    <div id="led-3" class="led" title="Value 8"></div>
                    <div id="led-2" class="led" title="Value 4"></div>
                    <div id="led-1" class="led" title="Value 2"></div>
                    <div id="led-0" class="led" title="Value 1"></div>
                </div>
            </div>

            <!-- The Decimal Display (7-Segment) -->
            <div class="mb-8 flex items-end space-x-2 p-4 bg-gray-800 rounded-lg">
                <p class="text-gray-400 text-xs mr-2">Decimal Value:</p>
                <div class="text-center">
                    <div id="display-tens" class="relative w-[50px] h-[90px] mx-1">
                        <!-- Tens Digit Segments -->
                        <div class="segment h absolute top-0 left-[5px]" data-segment="a"></div>
                        <div class="segment v absolute top-[5px] right-0" data-segment="b"></div>
                        <div class="segment v absolute bottom-[5px] right-0" data-segment="c"></div>
                        <div class="segment h absolute bottom-0 left-[5px]" data-segment="d"></div>
                        <div class="segment v absolute bottom-[5px] left-0" data-segment="e"></div>
                        <div class="segment v absolute top-[5px] left-0" data-segment="f"></div>
                        <div class="segment h absolute top-[40px] left-[5px]" data-segment="g"></div>
                    </div>
                </div>
                <div class="text-center">
                    <div id="display-ones" class="relative w-[50px] h-[90px] mx-1">
                        <!-- Ones Digit Segments -->
                        <div class="segment h absolute top-0 left-[5px]" data-segment="a"></div>
                        <div class="segment v absolute top-[5px] right-0" data-segment="b"></div>
                        <div class="segment v absolute bottom-[5px] right-0" data-segment="c"></div>
                        <div class="segment h absolute bottom-0 left-[5px]" data-segment="d"></div>
                        <div class="segment v absolute bottom-[5px] left-0" data-segment="e"></div>
                        <div class="segment v absolute top-[5px] left-0" data-segment="f"></div>
                        <div class="segment h absolute top-[40px] left-[5px]" data-segment="g"></div>
                    </div>
                </div>
            </div>


            <!-- The Potentiometer Control -->
            <div class="w-full">
                <label for="pot-input" class="block text-lg font-medium text-gray-300 mb-2">Potentiometer (Analog Input Simulation)</label>
                <input type="range" id="pot-input" min="0" max="1023" value="0" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-lg">
                <div class="flex justify-between text-xs text-gray-500 mt-1">
                    <span>0 (0V)</span>
                    <span>Analog: <span id="analog-val">0</span></span>
                    <span>1023 (5V)</span>
                </div>
                <p class="text-sm text-center font-semibold text-yellow-500 mt-4">
                    Current Decimal Output: <span id="decimal-val">0</span>
                </p>
            </div>
        </div>
    </div>

    <script>
        // --- ARDUINO CODE DISPLAY ---
        const arduinoCode = `
// Project: Potentiometer Controlled 6-bit Binary Counter (0-63)

int number; 
const int LED_PINS[] = {2, 3, 4, 5, 6, 7};
const int NUM_BITS = 6;

int pinA = 8; int pinB = 10; int pinC = A2; int pinD = A4;
int pinE = A5; int pinF = 9; int pinG = A1;
int pinDP = A3; int D3 = 11; int D4 = 12; 

void displayBinary(int value) {
  value = value & 0b111111; // Equivalent to value % 64
  Serial.println(value);
  for (int i = 0; i < NUM_BITS; i++) {
    // 1. Bit Extraction: (value >> i) shifts the i-th bit to the least 
    //    significant position (0). & 1 masks out all other bits, leaving 
    //    only a 0 or 1.
    int bit = (value >> i) & 1;
    // 2. Output: Write the bit value (which is either 0 or 1) to the pin.
    //    In Arduino, 1 maps to HIGH and 0 maps to LOW.
    digitalWrite(LED_PINS[i], bit);
    showDigits(value);
  }
}

void showDigits(int value){
  int second = value/10; 
  int first = value%10; 
  if (first == 0) {
    digit3();zero();
    delay(3);
  }
  else if(first == 1){
    digit3();one();
    delay(3);
  }
  else if (first == 2){
    digit3();two();
    delay(3);
  }
  else if (first == 3){
    digit3();three();
    delay(3);
  }
  else if (first == 4){
    digit3();four();
    delay(3);
  }
  else if (first == 5) {
    digit3();five();
    delay(3);
  }
  else if (first == 6) {
    digit3();six();
    delay(3);
  }
  else if (first == 7) {
    digit3();seven();
    delay(3);
  }
  else if (first == 8) {
    digit3();eight();
    delay(3);
  }
  else if (first == 9) {
    digit3();nine();
    delay(3);
  }
  
  if (second == 0) {
    digit4();zero();
    delay(3);
  }
  else if(second == 1){
    digit4();one();
    delay(3);
  }
  else if (second == 2){
    digit4();two();
    delay(3);
  }
  else if (second == 3){
    digit4();three();
    delay(3);
  }
  else if (second == 4){
    digit4();four();
    delay(3);
  }
  else if (second == 5) {
    digit4();five();
    delay(3);
  }
  else if (second == 6) {
    digit4();six();
    delay(3);
  }
  else if (second == 7) {
    digit4();seven();
    delay(3);
  }
  else if (second == 8) {
    digit4();eight();
    delay(3);
  }
  else if (second == 9) {
    digit4();nine();
    delay(3);
  }

}

void setup() {
  // put your setup code here, to run once:
  for(int i = 2; i < 8; i++){
    pinMode(i, OUTPUT);
    digitalWrite(i, LOW);
  }
  Serial.begin(9600);

  pinMode(pinA, OUTPUT);
  pinMode(pinB, OUTPUT);
  pinMode(pinC, OUTPUT);
  pinMode(pinD, OUTPUT);
  pinMode(pinE, OUTPUT);
  pinMode(pinF, OUTPUT);
  pinMode(pinG, OUTPUT);
  pinMode(pinDP, OUTPUT);
  pinMode(D3, OUTPUT);
  pinMode(D4, OUTPUT);
}

void loop() {
  // put your main code here, to run repeatedly:
  number = 63*((double) analogRead(A0)/1023);
  displayBinary(number);
}

//functions representing numbers 0-9
void zero(){
  digitalWrite(pinA, HIGH);
  digitalWrite(pinB, HIGH);
  digitalWrite(pinC, HIGH);
  digitalWrite(pinD, HIGH);
  digitalWrite(pinE, HIGH);
  digitalWrite(pinF, HIGH);
  digitalWrite(pinG, LOW);
}

void one(){
  digitalWrite(pinA, LOW);
  digitalWrite(pinB, HIGH);
  digitalWrite(pinC, HIGH);
  digitalWrite(pinD, LOW);
  digitalWrite(pinE, LOW);
  digitalWrite(pinF, LOW);
  digitalWrite(pinG, LOW);
}

void two(){
  digitalWrite(pinA, HIGH);
  digitalWrite(pinB, HIGH);
  digitalWrite(pinC, LOW);
  digitalWrite(pinD, HIGH);
  digitalWrite(pinE, HIGH);
  digitalWrite(pinF, LOW);
  digitalWrite(pinG, HIGH);
}

void three(){
  digitalWrite(pinA, HIGH);
  digitalWrite(pinB, HIGH);
  digitalWrite(pinC, HIGH);
  digitalWrite(pinD, HIGH);
  digitalWrite(pinE, LOW);
  digitalWrite(pinF, LOW);
  digitalWrite(pinG, HIGH);
}

void four(){
  digitalWrite(pinA, LOW);
  digitalWrite(pinB, HIGH);
  digitalWrite(pinC, HIGH);
  digitalWrite(pinD, LOW);
  digitalWrite(pinE, LOW);
  digitalWrite(pinF, HIGH);
  digitalWrite(pinG, HIGH);
}

void five(){
  digitalWrite(pinA, HIGH);
  digitalWrite(pinB, LOW);
  digitalWrite(pinC, HIGH);
  digitalWrite(pinD, HIGH);
  digitalWrite(pinE, LOW);
  digitalWrite(pinF, HIGH);
  digitalWrite(pinG, HIGH);
}

void six(){
  digitalWrite(pinA, HIGH);
  digitalWrite(pinB, LOW);
  digitalWrite(pinC, HIGH);
  digitalWrite(pinD, HIGH);
  digitalWrite(pinE, HIGH);
  digitalWrite(pinF, HIGH);
  digitalWrite(pinG, HIGH);
}

void seven(){
  digitalWrite(pinA, HIGH);
  digitalWrite(pinB, HIGH);
  digitalWrite(pinC, HIGH);
  digitalWrite(pinD, LOW);
  digitalWrite(pinE, LOW);
  digitalWrite(pinF, LOW);
  digitalWrite(pinG, LOW);
}

void eight(){
  digitalWrite(pinA, HIGH);
  digitalWrite(pinB, HIGH);
  digitalWrite(pinC, HIGH);
  digitalWrite(pinD, HIGH);
  digitalWrite(pinE, HIGH);
  digitalWrite(pinF, HIGH);
  digitalWrite(pinG, HIGH);
}

void nine(){
  digitalWrite(pinA, HIGH);
  digitalWrite(pinB, HIGH);
  digitalWrite(pinC, HIGH);
  digitalWrite(pinD, LOW);
  digitalWrite(pinE, LOW);
  digitalWrite(pinF, HIGH);
  digitalWrite(pinG, HIGH);
}

void digit3(){
  digitalWrite(D3, HIGH);
  digitalWrite(D4, LOW);
}
   
void digit4(){
  digitalWrite(D3, LOW);
  digitalWrite(D4, HIGH);
}

`;
        document.getElementById('arduino-code').textContent = arduinoCode.trim();


        // --- SIMULATION LOGIC ---

        const potInput = document.getElementById('pot-input');
        const analogValDisplay = document.getElementById('analog-val');
        const decimalValDisplay = document.getElementById('decimal-val');
        const ledElements = [
            document.getElementById('led-0'), // LSB (1)
            document.getElementById('led-1'),
            document.getElementById('led-2'),
            document.getElementById('led-3'),
            document.getElementById('led-4'),
            document.getElementById('led-5')  // MSB (32)
        ];

        /**
         * 7-Segment Display Logic
         * Defines which segments (a-g) are ON for each digit (0-9).
         * Segments:
         * a
         * -----
         * f|  g  |b
         * -----
         * e|  d  |c
         * -----
         */
        const SEGMENT_MAP = {
            '0': ['a', 'b', 'c', 'd', 'e', 'f'],
            '1': ['b', 'c'],
            '2': ['a', 'b', 'g', 'e', 'd'],
            '3': ['a', 'b', 'g', 'c', 'd'],
            '4': ['f', 'g', 'b', 'c'],
            '5': ['a', 'f', 'g', 'c', 'd'],
            '6': ['a', 'f', 'g', 'e', 'c', 'd'],
            '7': ['a', 'b', 'c'],
            '8': ['a', 'b', 'c', 'd', 'e', 'f', 'g'],
            '9': ['a', 'b', 'g', 'f', 'c', 'd'],
            '-': ['g'] // For testing
        };

        /**
         * Updates a single 7-segment display element based on a digit value.
         * @param {number|string} digitValue - The digit to display (0-9).
         * @param {HTMLElement} displayElement - The container for the 7 segments.
         */
        function updateSevenSegmentDisplay(digitValue, displayElement) {
            const segments = displayElement.querySelectorAll('.segment');
            const digit = String(digitValue);
            const segmentsToLight = SEGMENT_MAP[digit] || [];

            segments.forEach(segment => {
                const segmentName = segment.getAttribute('data-segment');
                if (segmentsToLight.includes(segmentName)) {
                    segment.classList.add('on');
                } else {
                    segment.classList.remove('on');
                }
            });
        }


        /**
         * Main function to run the simulation loop (on input change).
         */
        function runSimulation() {
            // 1. Read Potentiometer (Simulated Analog Read 0-1023)
            const analogReadValue = parseInt(potInput.value);
            analogValDisplay.textContent = analogReadValue;

            // 2. Map Analog Value to Counter Range (0-63)
            // AnalogRead(0-1023) maps to CounterValue(0-63)
            const decimalValue = Math.floor((analogReadValue / 1023) * 63);
            decimalValDisplay.textContent = decimalValue;

            // 3. Convert Decimal to 6-bit Binary String (e.g., 42 -> "101010")
            const binaryString = decimalValue.toString(2).padStart(6, '0');

            // 4. Update the 6 LEDs (Binary Output)
            // Note: The LEDs are indexed 0 (LSB) to 5 (MSB)
            // The binary string is indexed 0 (MSB) to 5 (LSB)
            for (let i = 0; i < 6; i++) {
                // We use the reverse index of the binary string to match LSB/MSB
                const bit = binaryString[5 - i];
                if (bit === '1') {
                    ledElements[i].classList.add('on');
                } else {
                    ledElements[i].classList.remove('on');
                }
            }

            // 5. Update the 2-Digit 7-Segment Display (Decimal Output)
            const decimalStr = String(decimalValue).padStart(2, '0');
            const tensDigit = decimalStr[0];
            const onesDigit = decimalStr[1];

            const tensDisplay = document.getElementById('display-tens');
            const onesDisplay = document.getElementById('display-ones');

            updateSevenSegmentDisplay(tensDigit, tensDisplay);
            updateSevenSegmentDisplay(onesDigit, onesDisplay);
        }

        // Initialize simulation on load
        runSimulation();

        // Attach event listener to the potentiometer input
        potInput.addEventListener('input', runSimulation);
    </script>
</body>
</html>
